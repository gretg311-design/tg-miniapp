<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Луна</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #050505; color: white; font-family: sans-serif; margin: 0; display: flex; align-items: center; justify-content: center; height: 100vh; flex-direction: column; }
        .moon { width: 150px; height: 150px; background: radial-gradient(circle at 30% 30%, #a37cf7, #6a0dad); border-radius: 50%; box-shadow: 0 0 50px #6a0dad; animation: pulse 2s infinite ease-in-out; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
        h1 { margin-top: 20px; font-weight: 300; letter-spacing: 2px; }
    </style>
</head>
<body>
    <div class="moon"></div>
    <h1 id="status">ЗАГРУЗКА...</h1>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        const user = {
            tgId: tg.initDataUnsafe?.user?.id || 12345,
            name: tg.initDataUnsafe?.user?.first_name || "Странник"
        };

        fetch('/api/auth', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(user)
        })
        .then(res => res.json())
        .then(data => {
            document.getElementById('status').innerText = "ПРИВЕТ, " + data.name.toUpperCase();
        })
        .catch(() => { document.getElementById('status').innerText = "ОШИБКА СЕТИ"; });
    </script>
</body>
</html>
