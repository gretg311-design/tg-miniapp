<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Anime RP AI</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body style="background:black;color:#00ff88;font-family:monospace">

<h3>üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram...</h3>

<script>
const tg = window.Telegram?.WebApp;

if (!tg) {
  document.body.innerHTML = "<h3>‚ùå –û—Ç–∫—Ä–æ–π —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ò–ó TELEGRAM</h3>";
  throw new Error("Not Telegram");
}

tg.ready();

if (!tg.initData) {
  document.body.innerHTML = "<h3>‚ùå –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö Telegram</h3>";
  throw new Error("No initData");
}

fetch("/api/auth", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ initData: tg.initData })
})
.then(r => r.json())
.then(data => {
  if (!data.ok) {
    document.body.innerHTML = "<h3>‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ Telegram</h3>";
    return;
  }

  document.body.innerHTML = `
    <h3>‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥</h3>
    <pre>
ID: ${data.user.id}
Username: @${data.user.username || "‚Äî"}
    </pre>
  `;
});
</script>

</body>
</html>
