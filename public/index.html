<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Anime AI</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body style="background:#0b0b0b;color:#00ff88;font-family:monospace">

<h3 id="status">๐ ะัะพะฒะตัะบะฐ Telegram...</h3>

<script>
const tg = window.Telegram.WebApp;
tg.ready();

if (!tg.initData) {
  document.getElementById("status").innerText =
    "โ ะัะบัะพะน ัะตัะตะท Telegram";
  throw new Error("NO INIT DATA");
}

fetch("/api/auth", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ initData: tg.initData || tg.initDataUnsafe })
})
.then(r => r.json())
.then(data => {
  if (!data.ok) {
    document.getElementById("status").innerText =
      "โ ะัะธะฑะบะฐ ะฟัะพะฒะตัะบะธ Telegram";
    return;
  }

  document.getElementById("status").innerHTML = `
โ ะฃัะฟะตัะฝะพ!

ID: ${data.user.id}
Username: @${data.user.username || "โ"}
Premium: ${data.user.is_premium ? "YES" : "NO"}
`;
})
.catch(() => {
  document.getElementById("status").innerText =
    "โ ะกะตัะฒะตัะฝะฐั ะพัะธะฑะบะฐ";
});
</script>

</body>
</html>
