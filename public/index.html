<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Anime AI 18+</title>
<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>
* { margin:0; padding:0; box-sizing:border-box }
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont;
  background:#0b0614;
  color:white;
}
header {
  padding:16px;
  background:#120a24;
  display:flex;
  justify-content:space-between;
}
.balance { color:#e0c8ff }
main { padding:16px; padding-bottom:100px }
.card {
  background:linear-gradient(145deg,#1b0f33,#0e071b);
  border-radius:16px;
  padding:16px;
  margin-bottom:16px;
}
.btn {
  width:100%;
  padding:14px;
  border-radius:14px;
  border:none;
  font-size:16px;
  margin-top:10px;
}
.btn-primary {
  background:linear-gradient(90deg,#7b3fe4,#a56bff);
  color:white;
}
.btn-disabled {
  background:#2b1c4d;
  color:#777;
}
</style>
</head>

<body>

<header>
  <div>üåô Anime AI 18+</div>
  <div class="balance">–û—Å–∫–æ–ª–∫–∏: <span id="balance">0</span></div>
</header>

<main>

<div class="card">
  <h2>üéÅ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞</h2>
  <p id="dailyText">–ó–∞–≥—Ä—É–∑–∫–∞...</p>
  <button id="dailyBtn" class="btn btn-primary">–ü–æ–ª—É—á–∏—Ç—å</button>
</div>

</main>

<script>
const tg = Telegram.WebApp;
tg.ready();

// ---------- –ù–ê–°–¢–†–û–ô–ö–ò ----------
const DAILY_REWARD = 15;
const DAY = 24 * 60 * 60 * 1000;

// ---------- –î–ê–ù–ù–´–ï ----------
let balance = Number(localStorage.getItem("balance")) || 50;
let lastDaily = Number(localStorage.getItem("lastDaily")) || 0;
let streak = Number(localStorage.getItem("streak")) || 0;

// ---------- UI ----------
const balanceEl = document.getElementById("balance");
const dailyText = document.getElementById("dailyText");
const dailyBtn = document.getElementById("dailyBtn");

balanceEl.innerText = balance;

// ---------- –õ–û–ì–ò–ö–ê ----------
function updateDaily() {
  const now = Date.now();
  const diff = now - lastDaily;

  if (diff >= DAY) {
    dailyText.innerText = `–î–æ—Å—Ç—É–ø–Ω–æ! üî• –°—Ç—Ä–∏–∫: ${streak} –¥–Ω–µ–π`;
    dailyBtn.disabled = false;
    dailyBtn.className = "btn btn-primary";
  } else {
    const hours = Math.ceil((DAY - diff) / (1000 * 60 * 60));
    dailyText.innerText = `–î–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ ${hours} —á`;
    dailyBtn.disabled = true;
    dailyBtn.className = "btn btn-disabled";
  }
}

dailyBtn.onclick = () => {
  const now = Date.now();

  if (now - lastDaily < DAY) return;

  // –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∏–∫–∞
  if (now - lastDaily < DAY * 2) {
    streak++;
  } else {
    streak = 1;
  }

  let reward = DAILY_REWARD;

  if (streak >= 7) {
    reward *= 2;
  }

  balance += reward;
  lastDaily = now;

  localStorage.setItem("balance", balance);
  localStorage.setItem("lastDaily", lastDaily);
  localStorage.setItem("streak", streak);

  balanceEl.innerText = balance;
  updateDaily();

  alert(`üéâ +${reward} –æ—Å–∫–æ–ª–∫–æ–≤!\n–°—Ç—Ä–∏–∫: ${streak}`);
};

updateDaily();
</script>

</body>
</html>
