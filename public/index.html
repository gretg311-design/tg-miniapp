<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Luna 18+</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { background: #000; color: white; font-family: sans-serif; margin: 0; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .header-box { border: 1px solid #301934; border-radius: 20px; padding: 15px; width: 100%; display: flex; justify-content: space-between; align-items: center; box-sizing: border-box; }
        .user-info { display: flex; flex-direction: column; }
        .user-name { font-style: italic; font-weight: bold; font-size: 18px; }
        .user-id { color: #888; font-size: 12px; margin-top: 4px; }
        .balance { color: #a020f0; font-weight: bold; display: flex; align-items: center; gap: 5px; }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; width: 100%; margin-top: 30px; }
        .btn { background: #000; border: 1px solid #301934; border-radius: 15px; padding: 30px 10px; text-align: center; text-transform: uppercase; font-weight: bold; font-size: 12px; cursor: pointer; }
        .btn.console { border-color: #ff0000; color: #ff0000; }
        
        .footer { position: fixed; bottom: 30px; width: 90%; display: flex; justify-content: space-between; border-top: 1px solid #301934; padding-top: 15px; }
        .nav-item { display: flex; align-items: center; gap: 5px; text-transform: uppercase; font-weight: bold; font-size: 14px; }

        .screen { display: none; width: 100%; flex-direction: column; align-items: center; }
        .active { display: flex; }
    </style>
</head>
<body>

    <div id="main-screen" class="screen active">
        <div class="header-box">
            <div class="user-info">
                <div id="display-name" class="user-name">German Green (BOSS)</div>
                <div id="display-id" class="user-id">ID: 8287041036</div>
            </div>
            <div class="balance">üåô <span id="display-balance">99999999</span></div>
        </div>

        <div class="grid">
            <div class="btn" onclick="openS('chats')">–ß–∞—Ç—ã</div>
            <div class="btn" onclick="openS('chars')">–ü–µ—Ä—Å–æ–Ω–∞–∂–∏</div>
            <div class="btn" onclick="openS('daily')">–ï–∂–µ–¥–Ω–µ–≤–∫–∞</div>
            <div class="btn" onclick="openS('tasks')">–ó–∞–¥–∞–Ω–∏—è</div>
            <div class="btn" onclick="openS('shop')">–ú–∞–≥–∞–∑–∏–Ω</div>
            <div class="btn" onclick="openS('promo')">–ü—Ä–æ–º–æ–∫–æ–¥—ã</div>
            <div class="btn" onclick="openS('profile')">–ü—Ä–æ—Ñ–∏–ª—å</div>
            <div class="btn" onclick="openS('settings')">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
            <div class="btn" id="adm-btn" style="display:none;" onclick="openS('admin')">–ê–¥–º–∏–Ω–∫–∞</div>
            <div class="btn console" id="con-btn" style="display:none;" onclick="openS('console')">–ö–æ–Ω—Å–æ–ª—å</div>
        </div>

        <div class="footer">
            <div class="nav-item" onclick="location.reload()">üè† –î–æ–º–æ–π</div>
            <div class="nav-item" onclick="history.back()">‚óÄ –ù–∞–∑–∞–¥</div>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        const tgUser = tg.initDataUnsafe?.user || { id: 8287041036, first_name: "German Green" };

        fetch('/api/auth', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ tgId: tgUser.id, name: tgUser.first_name })
        })
        .then(res => res.json())
        .then(user => {
            document.getElementById('display-name').innerText = user.name + (user.role === 'owner' ? ' (BOSS)' : '');
            document.getElementById('display-id').innerText = 'ID: ' + user.tgId;
            document.getElementById('display-balance').innerText = user.balance;

            if(user.role === 'owner' || user.role === 'admin') document.getElementById('adm-btn').style.display = 'block';
            if(user.role === 'owner') document.getElementById('con-btn').style.display = 'block';
        });

        function openS(name) { alert('–û—Ç–∫—Ä—ã–≤–∞—é: ' + name); }
    </script>
</body>
</html>
