<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Anime AI 18+</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root { --bg: #0a0012; --panel: rgba(30, 0, 50, 0.75); --accent: #bc13fe; --text: #f0f0f0; }
        body { background: var(--bg); color: var(--text); font-family: 'Segoe UI', sans-serif; margin: 0; overflow: hidden; touch-action: none; }
        
        /* Loader */
        #loader { position: fixed; inset: 0; background: #000; display: flex; justify-content: center; align-items: center; z-index: 999; }
        .moon { width: 80px; height: 80px; background: #fff; border-radius: 50%; box-shadow: 0 0 40px var(--accent); animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 0.8; } 50% { transform: scale(1.1); opacity: 1; } }

        /* Registration */
        #reg-form { position: fixed; inset: 0; background: var(--bg); z-index: 900; padding: 40px; display: flex; flex-direction: column; gap: 20px; justify-content: center; }
        input, select, button { background: var(--panel); border: 1px solid var(--accent); color: #fff; padding: 15px; border-radius: 10px; font-size: 16px; }
        button { background: var(--accent); font-weight: bold; cursor: pointer; }

        /* Main UI */
        .header { padding: 15px; background: var(--panel); border-bottom: 1px solid var(--accent); backdrop-filter: blur(10px); }
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; padding: 15px; height: calc(100vh - 200px); overflow-y: auto; }
        .card { background: var(--panel); border: 1px solid rgba(188, 19, 254, 0.3); padding: 20px; border-radius: 12px; text-align: center; }

        /* Chat Photo Button */
        .photo-btn { margin-top: 10px; background: linear-gradient(45deg, #bc13fe, #7a0bc0); border: none; padding: 5px 10px; border-radius: 5px; font-size: 12px; }

        /* Bottom Nav */
        .nav-bar { position: fixed; bottom: 0; width: 100%; height: 70px; background: var(--panel); backdrop-filter: blur(15px); display: flex; justify-content: space-around; align-items: center; border-top: 1px solid var(--accent); }
        .nav-item { flex: 1; text-align: center; font-size: 14px; font-weight: bold; color: var(--accent); }
    </style>
</head>
<body>

<div id="loader"><div class="moon"></div></div>

<div id="reg-form" class="hidden">
    <h2 style="text-align: center">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è 18+</h2>
    <input type="text" id="name" placeholder="–¢–≤–æ–µ –∏–º—è...">
    <select id="gender">
        <option value="male">–ü–∞—Ä–µ–Ω—å</option>
        <option value="female">–î–µ–≤—É—à–∫–∞</option>
    </select>
    <div style="font-size: 12px; text-align: center; opacity: 0.7;">–ö–∞–ø—á–∞: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ, —á—Ç–æ –≤–∞–º –µ—Å—Ç—å 18 –ª–µ—Ç</div>
    <button onclick="finishReg(true)">–ú–ù–ï –ï–°–¢–¨ 18 –õ–ï–¢</button>
    <button style="background: #444;" onclick="tg.close()">–ù–ï–¢</button>
</div>

<div id="app" class="hidden">
    <div class="header">
        <div style="display: flex; justify-content: space-between;">
            <b id="display-name">User</b>
            <span>üåô <b id="balance">0</b> <button style="padding: 2px 8px;" onclick="showTab('shop')">+</button></span>
        </div>
        <div style="font-size: 11px; opacity: 0.6; margin-top: 5px;">ID: <span id="display-id">0</span> | <span id="sub-status">Ultra (–ü—Ä–æ–±–Ω–∏–∫)</span></div>
    </div>

    <div class="menu-grid" id="main-menu">
        <div class="card" onclick="startChat()">üí¨ –ß–∞—Ç—ã</div>
        <div class="card">üé≠ –ü–µ—Ä—Å–æ–Ω–∞–∂–∏</div>
        <div class="card" onclick="getDaily()">üéÅ –ï–∂–µ–¥–Ω–µ–≤–∫–∞</div>
        <div class="card">üìú –ó–∞–¥–∞–Ω–∏—è</div>
        <div class="card">üõí –ú–∞–≥–∞–∑–∏–Ω</div>
        <div class="card">üîë –ü—Ä–æ–º–æ</div>
        <div class="card">üë§ –ü—Ä–æ—Ñ–∏–ª—å</div>
        <div class="card">‚öôÔ∏è –û–ø—Ü–∏–∏</div>
        <div class="card">üõ°Ô∏è –ê–¥–º–∏–Ω</div>
        <div class="card" id="owner-btn">üñ•Ô∏è –ö–æ–Ω—Å–æ–ª—å</div>
    </div>

    <div class="nav-bar">
        <div class="nav-item" onclick="goBack()">‚óÄ –ù–ê–ó–ê–î</div>
        <div class="nav-item" onclick="goHome()">üè† –î–û–ú–û–ô</div>
    </div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    // –ó–∞–≥—Ä—É–∑–∫–∞
    window.onload = () => {
        setTimeout(() => {
            document.getElementById('loader').style.display = 'none';
            // –ï—Å–ª–∏ –ø–µ—Ä–≤—ã–π –≤—Ö–æ–¥ - –ø–æ–∫–∞–∑–∞—Ç—å —Ä–µ–≥—É
            document.getElementById('reg-form').classList.remove('hidden');
        }, 2000);
    };

    function finishReg(isAdult) {
        if(!isAdult) return tg.close();
        const name = document.getElementById('name').value;
        if(!name) return alert("–í–≤–µ–¥–∏—Ç–µ –∏–º—è!");
        
        document.getElementById('reg-form').classList.add('hidden');
        document.getElementById('app').classList.remove('hidden');
        document.getElementById('display-name').innerText = name;
        // –ó–¥–µ—Å—å –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –±—ç–∫–µ–Ω–¥ /api/init
    }

    function goHome() { /* –°–º–µ–Ω–∞ —ç–∫—Ä–∞–Ω–æ–≤ */ }
    function goBack() { /* –ò—Å—Ç–æ—Ä–∏—è —ç–∫—Ä–∞–Ω–æ–≤ */ }

    // –ü—Ä–∏–º–µ—Ä –∫–Ω–æ–ø–∫–∏ —Ñ–æ—Ç–æ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º
    function createPhotoBtn() {
        // –ü–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –±–æ—Ç–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:
        // <button class="photo-btn" onclick="genPhoto()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ç–æ (5üåô/2üåô)</button>
    }
</script>
</body>
</html>
