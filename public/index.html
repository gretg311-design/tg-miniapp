<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>A-Z Project</title>
    <style>
        /* –ë–ê–ó–û–í–´–ï –°–¢–ò–õ–ò - –ß–ï–†–ù–´–ô –§–û–ù –°–†–ê–ó–£ */
        body, html {
            background-color: #000 !important;
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            overflow: hidden;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        }

        /* –¢–ê –°–ê–ú–ê–Ø –õ–£–ù–ê - –ü–û–Ø–í–õ–Ø–ï–¢–°–Ø –ü–ï–†–í–û–ô */
        #splash {
            position: fixed;
            inset: 0;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .moon {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle at 30% 30%, #ffffff, #8a2be2 70%);
            border-radius: 50%;
            box-shadow: 0 0 60px rgba(138, 43, 226, 0.8);
            animation: moon-pulse 2s infinite ease-in-out;
        }

        @keyframes moon-pulse {
            0%, 100% { transform: scale(1); filter: brightness(1); }
            50% { transform: scale(1.1); filter: brightness(1.3); box-shadow: 0 0 90px rgba(138, 43, 226, 1); }
        }

        /* –ò–ù–¢–ï–†–§–ï–ô–° - –°–ö–†–´–¢ –î–û –ó–ê–ì–†–£–ó–ö–ò */
        #app {
            display: none;
            flex-direction: column;
            height: 100vh;
            padding-bottom: env(safe-area-inset-bottom);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 40px 20px 10px;
        }

        .user-name {
            color: #b026ff;
            font-weight: 800;
            font-size: 20px;
            text-transform: uppercase;
        }

        .balance {
            font-size: 18px;
            font-weight: 700;
            color: #ffa500;
        }

        /* –°–ï–¢–ö–ê –ö–ù–û–ü–û–ö 2x5 */
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: repeat(5, 1fr);
            gap: 12px;
            padding: 15px;
            flex-grow: 1;
        }

        .menu-btn {
            background: rgba(30, 5, 50, 0.6);
            border: 1px solid rgba(138, 43, 226, 0.3);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border-radius: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 13px;
            font-weight: 700;
            text-transform: uppercase;
            text-align: center;
            color: #fff;
            transition: 0.2s;
        }

        .menu-btn:active { transform: scale(0.95); background: rgba(138, 43, 226, 0.4); }

        .console-btn {
            border: 1px solid #ff3b3b !important;
            color: #ff3b3b;
        }

        /* –û–ö–ù–ê */
        .window {
            display: none;
            position: fixed;
            inset: 0;
            background: #000;
            z-index: 1000;
            padding: 20px;
            padding-top: 50px;
        }

        .window.active { display: block; }

        .footer {
            display: flex;
            justify-content: space-around;
            padding: 20px;
            border-top: 1px solid rgba(255,255,255,0.1);
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="splash">
        <div class="moon"></div>
        <p style="margin-top: 30px; color: #8a2be2; font-weight: 800; letter-spacing: 3px;">LOADING...</p>
    </div>

    <div id="app">
        <div class="header">
            <div class="user-name" id="display-name">BOSS</div>
            <div class="balance">üåô <span id="display-shards">‚àû</span></div>
        </div>

        <div class="grid">
            <div class="menu-btn" onclick="openTab('chats')">–ß–ê–¢–´</div>
            <div class="menu-btn" onclick="openTab('chars')">–ü–ï–†–°–û–ù–ê–ñ–ò</div>
            <div class="menu-btn" onclick="openTab('daily')">–ï–ñ–ï–î–ù–ï–í–ö–ê</div>
            <div class="menu-btn" onclick="openTab('tasks')">–ó–ê–î–ê–ù–ò–Ø</div>
            <div class="menu-btn" onclick="openTab('shop')">–ú–ê–ì–ê–ó–ò–ù</div>
            <div class="menu-btn" onclick="openTab('promo')">–ü–†–û–ú–û–ö–û–î–´</div>
            <div class="menu-btn" onclick="openTab('profile')">–ü–†–û–§–ò–õ–¨</div>
            <div class="menu-btn" onclick="openTab('settings')">–ù–ê–°–¢–†–û–ô–ö–ò</div>
            <div class="menu-btn" onclick="openTab('admin')">–ê–î–ú–ò–ù–ö–ê</div>
            <div class="menu-btn console-btn" id="console-node" onclick="openTab('console')">–ö–û–ù–°–û–õ–¨</div>
        </div>

        <div class="footer">
            <div onclick="closeTab()">‚óÄ –ù–ê–ó–ê–î</div>
            <div onclick="closeTab()">üè† –î–û–ú–û–ô</div>
        </div>
    </div>

    <div id="win-reg" class="window">
        <h2 style="color:#b026ff">–†–ï–ì–ò–°–¢–†–ê–¶–ò–Ø</h2>
        <input type="text" id="reg-name" placeholder="–¢–≤–æ–µ –∏–º—è" style="width:100%; padding:15px; margin:10px 0; background:#1a0033; border:1px solid #8a2be2; color:#fff; border-radius:10px;">
        <div class="menu-btn" style="height:60px" onclick="saveReg()">–ù–ê–ß–ê–¢–¨</div>
    </div>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        const OWNER_ID = "8287041036";

        function init() {
            const tg = window.Telegram.WebApp;
            tg.ready();
            tg.expand();
            tg.backgroundColor = "#000000";
            tg.headerColor = "#000000";

            const myId = tg.initDataUnsafe?.user?.id?.toString() || new URLSearchParams(window.location.search).get('tgId') || OWNER_ID;

            // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
            fetch(`/api/get-user?tgId=${myId}`)
                .then(res => res.json())
                .then(data => {
                    setTimeout(() => {
                        document.getElementById('splash').style.display = 'none';
                        document.getElementById('app').style.display = 'flex';

                        if (myId === OWNER_ID) {
                            document.getElementById('display-name').innerText = "–ê–∑—É–º–∏ –ê–π (BOSS)";
                            document.getElementById('display-shards').innerText = "‚àû";
                        } else if (data.exists) {
                            document.getElementById('display-name').innerText = data.user.name.toUpperCase();
                            document.getElementById('display-shards').innerText = data.user.shards;
                            document.getElementById('console-node').classList.add('hidden');
                        } else {
                            document.getElementById('win-reg').classList.add('active');
                        }
                    }, 1500); // 1.5 —Å–µ–∫ –ª—é–±—É–µ–º—Å—è –ª—É–Ω–æ–π
                })
                .catch(err => {
                    // –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—Ç–∏–ª, –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é —á–µ—Ä–µ–∑ 2 —Å–µ–∫
                    setTimeout(() => {
                        document.getElementById('splash').style.display = 'none';
                        document.getElementById('app').style.display = 'flex';
                    }, 2000);
                });
        }

        function openTab(id) {
            alert("–û—Ç–∫—Ä—ã–≤–∞—é: " + id);
        }

        function closeTab() {
            document.querySelectorAll('.window').forEach(w => w.classList.remove('active'));
        }

        // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è –ø—Ä–∏ —Å–≤–∞–π–ø–µ –≤–Ω–∏–∑
        window.addEventListener('touchstart', e => {
            if (e.pageY < 10) e.preventDefault();
        }, {passive: false});

        window.onload = init;
    </script>
</body>
</html>
