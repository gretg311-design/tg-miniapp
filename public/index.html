<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Anime RP AI</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      background:#0b0b0f;
      color:#fff;
      font-family:system-ui, sans-serif;
      margin:0;
      padding:16px;
    }
    button {
      padding:12px;
      margin:6px 0;
      width:100%;
      border-radius:10px;
      border:none;
      background:#7c4dff;
      color:white;
      font-size:16px;
    }
  </style>
</head>

<body>
<h2>üåô Anime RP AI</h2>
<p id="status">–ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram‚Ä¶</p>

<button id="enter" style="display:none">–í–æ–π—Ç–∏</button>

<script>
const tg = window.Telegram.WebApp;
tg.ready();

fetch("/api/auth", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({ initData: tg.initData })
})
.then(r => r.json())
.then(data => {
  if (!data.ok) {
    document.getElementById("status").innerText = "‚ùå –û—à–∏–±–∫–∞ Telegram";
    return;
  }

  window.USER = data.user;

  document.getElementById("status").innerText =
    `üë§ ${data.user.first_name} (ID: ${data.user.id})`;

  document.getElementById("enter").style.display = "block";
})
.catch(() => {
  document.getElementById("status").innerText = "‚ùå –°–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω";
});

document.getElementById("enter").onclick = () => {
  alert("–î–∞–ª—å—à–µ –±—É–¥–µ—Ç –º–µ–Ω—é –ø–µ—Ä—Å–æ–Ω–∞–∂–µ–π –∏ —á–∞—Ç—ã");
};
</script>
</body>
</html>
