<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Anime AI RP</title>

  <!-- Telegram WebApp SDK -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>

  <style>
    body {
      background: #0b0b0b;
      color: #00ff99;
      font-family: monospace;
      padding: 20px;
    }
    pre {
      background: #111;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
    }
  </style>
</head>

<body>
<h3>üîê –ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram‚Ä¶</h3>

<script>
  if (!window.Telegram || !window.Telegram.WebApp) {
    document.body.innerHTML = "<h3>‚ùå –û—Ç–∫—Ä–æ–π—Ç–µ –º–∏–Ω–∏-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Telegram</h3>";
    throw new Error("Not in Telegram");
  }

  const tg = window.Telegram.WebApp;
  tg.ready();

  const initData = tg.initData;

  fetch("/api/init", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ initData })
  })
    .then(res => res.json())
    .then(data => {
      if (!data.ok) {
        document.body.innerHTML += "<pre>‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ Telegram</pre>";
        return;
      }

      document.body.innerHTML += `
<pre>
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–π–¥–µ–Ω–∞

Telegram ID: ${data.user.id}
–ò–º—è: ${data.user.first_name}
Username: @${data.user.username || "‚Äî"}
Premium: ${data.user.is_premium ? "YES" : "NO"}
</pre>
`;
    })
    .catch(err => {
      document.body.innerHTML += "<pre>‚ùå " + err + "</pre>";
    });
</script>

</body>
</html>
