<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: #0f172a; color: white; min-height: 100vh; padding: 15px; }
        
        /* –®–∞–ø–∫–∞ –∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω–µ */
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .user-info .name { font-style: italic; font-weight: bold; font-size: 18px; }
        .user-info .id { font-size: 10px; opacity: 0.5; }
        .stats { display: flex; gap: 10px; align-items: center; }
        .stat-item { display: flex; align-items: center; gap: 5px; background: rgba(255,255,255,0.05); padding: 5px 10px; border-radius: 20px; }
        .badge-vip { background: #334155; color: #94a3b8; padding: 4px 12px; border-radius: 15px; font-weight: bold; font-size: 12px; }
        .plus-btn { background: #3b82f6; width: 25px; height: 25px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; }

        h2 { margin-bottom: 20px; font-size: 24px; }

        /* –°–µ—Ç–∫–∞ –º–µ–Ω—é –∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω–µ */
        .menu-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .menu-card { 
            background: #1e293b; 
            border-radius: 24px; 
            padding: 25px 10px; 
            text-align: center; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 10px;
            transition: 0.2s;
        }
        .menu-card:active { transform: scale(0.95); background: #334155; }
        .menu-card img, .menu-card .icon { font-size: 32px; }
        .menu-card span { font-size: 16px; font-weight: 500; }

        /* –°–∫—Ä—ã—Ç—ã–µ —Å–µ–∫—Ü–∏–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .admin-section { margin-top: 20px; display: none; border-top: 1px dashed #334155; padding-top: 20px; }
        .console-btn { width: 100%; padding: 15px; border-radius: 15px; margin-bottom: 10px; font-weight: bold; border: none; color: white; }
        .btn-owner { background: #ef4444; }
        .btn-admin { background: #f59e0b; color: black; }

        .screen { display: none; }
        .screen.active { display: block; }
        .back-block { text-align: center; margin-top: 30px; opacity: 0.5; font-size: 14px; }
    </style>
</head>
<body>

<div id="main-screen" class="screen active">
    <div class="header">
        <div class="user-info">
            <div class="name" id="user-name">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
            <div class="id" id="user-id">ID: 000000</div>
        </div>
        <div class="stats">
            <div class="stat-item">üåô <span id="balance">0</span></div>
            <div class="badge-vip" id="sub-type">VIP</div>
            <div class="plus-btn">+</div>
        </div>
    </div>

    <h2>–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</h2>

    <div class="menu-grid">
        <div class="menu-card" onclick="tg.showAlert('–ß–∞—Ç—ã –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ')">
            <div class="icon">üí¨</div><span>–ß–∞—Ç—ã</span>
        </div>
        <div class="menu-card" onclick="tg.showAlert('–ü–µ—Ä—Å–æ–Ω–∞–∂–∏ —Å–∫–æ—Ä–æ')">
            <div class="icon">üßç</div><span>–ü–µ—Ä—Å–æ–Ω–∞–∂–∏</span>
        </div>
        <div class="menu-card" onclick="location.reload()">
            <div class="icon">üéÅ</div><span>–ï–∂–µ–¥–Ω–µ–≤–∫–∞</span>
        </div>
        <div class="menu-card">
            <div class="icon">üìã</div><span>–ó–∞–¥–∞–Ω–∏—è</span>
        </div>
        <div class="menu-card">
            <div class="icon">üõí</div><span>–ú–∞–≥–∞–∑–∏–Ω</span>
        </div>
        <div class="menu-card">
            <div class="icon">üéü</div><span>–ü—Ä–æ–º–æ–∫–æ–¥—ã</span>
        </div>
        <div class="menu-card">
            <div class="icon">üë§</div><span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </div>
        <div class="menu-card">
            <div class="icon">‚öôÔ∏è</div><span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
        </div>
    </div>

    <div id="admin-zone" class="admin-section">
        <button id="btn-admin-panel" class="console-btn btn-admin" onclick="alert('–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å')">‚öôÔ∏è –ê–î–ú–ò–ù-–ü–ê–ù–ï–õ–¨</button>
        <button id="btn-owner-panel" class="console-btn btn-owner" onclick="alert('–û–í–ù–ï–†-–ü–ê–ù–ï–õ–¨')">üëë –ö–û–†–û–ù–ê (–ö–û–ù–°–û–õ–¨)</button>
    </div>

    <div class="back-block">‚óè Back - block</div>
</div>

<script>
    const tg = window.Telegram.WebApp;
    tg.ready();
    tg.expand();

    const user = tg.initDataUnsafe.user || { id: 8287041036, first_name: "German Green" };

    function init() {
        fetch("/api/user", {
            method: "POST",
            headers: {"Content-Type":"application/json"},
            body: JSON.stringify({ id: user.id })
        })
        .then(r => r.json())
        .then(data => {
            document.getElementById("user-name").innerText = user.first_name;
            document.getElementById("user-id").innerText = "ID: " + user.id;
            document.getElementById("balance").innerText = data.balance;
            document.getElementById("sub-type").innerText = data.sub_type.toUpperCase();

            // –õ–æ–≥–∏–∫–∞ –≤–∏–¥–∏–º–æ—Å—Ç–∏ –∫–Ω–æ–ø–æ–∫
            const adminZone = document.getElementById("admin-zone");
            const btnAdmin = document.getElementById("btn-admin-panel");
            const btnOwner = document.getElementById("btn-owner-panel");

            if (data.role === 'owner') {
                adminZone.style.display = "block";
                btnAdmin.style.display = "block";
                btnOwner.style.display = "block";
            } else if (data.role === 'admin') {
                adminZone.style.display = "block";
                btnAdmin.style.display = "block";
                btnOwner.style.display = "none"; // –ê–¥–º–∏–Ω –Ω–µ –≤–∏–¥–∏—Ç –∫–æ—Ä–æ–Ω—É
            }
        });
    }

    init();
</script>
</body>
</html>
